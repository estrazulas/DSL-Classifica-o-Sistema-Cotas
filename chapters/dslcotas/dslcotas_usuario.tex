\section{A Modelagem da DSL Cotas}
\label{sec:dslproposta:usuario}

   
 Tendo como base a análise realizada no Capítulo \ref{chap:historicoversoes}, sobre as versões do sistema de cotas detalhadas nas Subseções \ref{versao1}, \ref{versao2} e \ref{versao3}, podem ser  pontuadas algumas características em comum identificadas entre cada uma dessas versões:
   
   \begin{enumerate}
    \item[a)] A divisão das vagas entre as diferentes categorias de cotas se deu em formato hierárquico, iniciando no total de vagas o qual foi sendo subdividido em percentuais reservados para suas subcategorias (ex: Estudantes da escola pública, Estudantes com renda baixa, Estudantes PCD, etc); 
   
   \item[b)] Esses percentuais são de conhecimento dos usuários especialistas no sistema de cotas, e podem variar de acordo com a documentação da legislação vigente, ou outras definições que variam conforme a Unidade Federada que oferta o curso; 
   
   \item[c)] Em muitos casos, não é definido um valor de percentual fixo, de modo que uma categoria recebe o valor calculado restante de vagas da categoria pai. Por exemplo, o percentual de cotistas \gls{PCD} é aplicado, e o que resta das vagas vai para candidatos da mesma categoria que não são \gls{PCD};

   \item[d)] Todas as versões consideravam a ordem de prioridade entre as diferentes categorias de cotas passíveis de inscrição;
   
   \item[e)] Questões de arredondamento das vagas (para cima ou para baixo), devem ser consideradas e podem variar de acordo com a versão de lei implementada.

   \end{enumerate}
   
   Segundo \citeonline{dslengineering}, a modelagem de DSLs costuma ser realizada com abordagens \textit{bottom-up} ou \textit{top-down}, a primeira abordagem aplica-se para domínios em termos de software, enquanto na segunda, o modelo do domínio é aplicado ao conhecimento sobre o mundo real, fora do domínio de software. Nesse contexto, a modelagem da DSL Cotas utilizou a abordagem \texttt{top-down}, uma vez que seu design procura fornecer suporte para os usuários especialistas definirem os parâmetros da legislação de forma controlada, possibilitando a geração do código de processamento de classificação de candidatos sem que o usuário precise utilizar comandos complexos para a implementação dos respectivos algoritmos.
   
   Para tanto, o modelo proposto foi baseado em artigos presentes na legislação que definem em formato textual, respectivamente: a distribuição de vagas, a forma de aplicação dos percentuais e a ordem de prioridade, como pode ser observado nas Figuras \ref{fig:art10}, \ref{fig:calcvagas} e \ref{fig:ordempri}. 
   
   \input{chapters/dslcotas/modelo/art10}
   
   \input{chapters/dslcotas/modelo/calcvagas}
   
   \input{chapters/dslcotas/modelo/ordempri}
   
   Essas Figuras exemplificam as propriedades e relacionamentos entre as categorias de cotas consideradas para a construção da linguagem proposta. Observa-se, por exemplo, que as informações de distribuição, das categorias de cotas, das subdivisões e das configurações (destacadas em ''vermelho'') na Figura \ref{fig:art10} incorporam os elementos do modelo da DSL Cotas (destaques em ''azul'') e suas respectivas propriedades (destacadas em ''preto''). Na Figura \ref{fig:calcvagas} é possível perceber no trecho de lei extraído a definição de siglas das categorias e exemplos de aplicação dos percentuais. Por fim, na Figura \ref{fig:ordempri} apresentam-se as diferentes categorias que definem a ordem de prioridade, em formato sequencial definido pela legislação, em que as categorias de Renda estão destacadas em ''vermelho'', as categorias de \gls{PPI} em ''azul'' e as \gls{PCD} em ''verde''. Ao lado direito consta um exemplo de ordem no elemento do modelo, extraído do artigo de lei (destaque na cor ''preta'', nomeado \texttt{OrdemPrioridade}).
  
   
  Assim, a \gls{DSL} desenvolvida consistiu em criar um modelo que permita a configuração de todos os itens listados, como: identificador da versão de lei, lista de variáveis para configuração de percentuais, formas de aplicação de arredondamento, uma macro para aplicar a função de resto de vagas de uma categoria, campo descritivo para os diferentes tipos de categorias, estrutura para divisão em subcategorias e lista de ordem de prioridade para a sobra de vagas.

   
    Na Seção \ref{sec:mps}, são apresentados os componentes desenvolvidos no MPS que são responsáveis pela construção da DSL Cotas.
    
   \input{chapters/dslcotas/mps/mps.tex}
